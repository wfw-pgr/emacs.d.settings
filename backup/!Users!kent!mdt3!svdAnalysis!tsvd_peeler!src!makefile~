
###############################################
### MakeFile                                ###
###############################################
target = ../main
object = \
  variablesMod.o \
  utilitiesMod.o \
  debugToolMod.o \
  ioUtilityMod.o \
  updateEqsMod.o \
  allocatorMod.o \
  cglsdenseMod.o \
  invSolverMod.o \
  main.o


###############################################
### Compiler Options                        ###
###############################################
# FC      = ifort
# FFLAGS  = -O4 -mkl -qopenmp -parallel -xhost -ipo
# LDFLAGS = 
FC      = gfortran
FFLAGS  = -O3 -fopenmp -llapack -lopenblas -lpthread -lgfortran
LDFLAGS = 


###############################################
### Dependence                              ###
###############################################
.SUFFIXES: .o .f90
%.o: %.f90
	$(FC) -c $< $(FFLAGS) $(LDFLAGS)
%.mod: %.f90 %.o
	@:
$(target): $(object)
	$(FC) -o $@ $(object) $(FFLAGS) $(LDFLAGS)

###############################################
### Commands                                ###
###############################################
.PHONY: clean all
clean:
	$(RM) $(target) $(object) *.mod
all: clean $(target)
