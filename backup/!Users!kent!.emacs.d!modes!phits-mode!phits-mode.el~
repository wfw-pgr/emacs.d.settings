
;;; ------------------------------------------------------------------------- ;;;
;;;   phits-mode       to edit PHITS's parameter.inp file                     ;;;
;;; ------------------------------------------------------------------------- ;;;

(defun phits-mode ()
  "PHITS Mode"
  (interactive)    ; M-x tmng-mode RET で呼び出せるようにする
  (kill-all-local-variables)    ; これまでのmodeの状態を綺麗に
  (setq mode-name "phits-mode")    ; Emacs上に表示される名前
  (setq major-mode 'phits-mode)    ; 現在のModeの設定
  (set-syntax-table phits-mode-syntax-table)    ; syntax-tableの登録
  ; デフォルトのハイライトリストにphits-mode-font-lock-keywords-2を追加 
  (set (make-local-variable 'font-lock-defaults) '(phits-mode-font-lock-keywords-2))
  (run-hooks 'phits-mode-hook) )

(defvar phits-mode-syntax-table
  (let ((st (make-syntax-table)))
    (modify-syntax-entry ?#  "<" st)
    (modify-syntax-entry ?\n ">" st)
    st)
  "Syntax table for `phits-mode'.")

;--色をつける部分の正規表現と指定する色の種類
(defconst phits-mode-font-lock-keywords-1
      (list
       '("set" . font-lock-function-name-face)
       '("=" . font-lock-variable-name-face)
       )
      "highlighting1 for Phits mode")

(defconst phits-mode-font-lock-keywords-2
  (append phits-mode-font-lock-keywords-1
      (list
       '("$" . font-lock-warning-face)
       '("#" . font-lock-keyword-face)
       '("xmin" . font-lock-string-face)
       '("ymin" . font-lock-string-face)
       ) )
  "highlighting2 for Phits mode")

(provide 'emacs-phits)    ; 読み込む名前
