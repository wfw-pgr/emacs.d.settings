import numpy as np


# ========================================================= #
# ===  load point file with prescribed header           === #
# ========================================================= #

def load__pointFile( inpFile=None, returnType="point" ):

    # ------------------------------------------------- #
    # --- [1] Arguments                             --- #
    # ------------------------------------------------- #
    if ( inpFile is None ): sys.exit( "[load__pointFile] inpFile   == ??? " )

    # ------------------------------------------------- #
    # --- [2] load Data with header                 --- #
    # ------------------------------------------------- #
    with open( inpFile, "r" ) as f:
        line1 = f.readline()
        line2 = f.readline()
        Data  = np.loadtxt( f )

    # ------------------------------------------------- #
    # --- [3] names & size                          --- #
    # ------------------------------------------------- #
    ext1  = ( ( line1.split( "#" ) )[1] ).split()
    ext2  = ( ( line2.split( "#" ) )[1] ).split()
    names = [ str(s) for s in ext1 ]
    size  = [ int(i) for i in ext2 ]
    print( names )  
    # ------------------------------------------------- #
    # --- [4] return                                --- #
    # ------------------------------------------------- #
    if   ( returnType.lower() == "point" ):
        ret = Data
    elif ( returnType.lower() == "dict"  ):
        ret = {}
        ret["size"] = size
        for ik,name in enumerate( names ):
            ret[name] = np.ravel( Data[:,ik] )
    else:
        sys.exit( "[load__pointFile] returnType = ( point, dict )" )
    return( ret )
    


# ======================================== #
# ===  実行部                          === #
# ======================================== #
if ( __name__=="__main__" ):

    inpFile = "output.dat"
    
    Data = load__pointFile( inpFile=inpFile, returnType="Dict" )
    print( Data["x1"] )
